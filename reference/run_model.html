<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Runs the OSEM model — run_model • osem</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Runs the OSEM model — run_model"><meta name="description" content="Runs the OSEM model according to the given specification of modules."><meta property="og:description" content="Runs the OSEM model according to the given specification of modules."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">osem</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/example-workflow.html">Example Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/new_variable_to_dict.html">Adding a new variable to the Dictionary</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Runs the OSEM model</h1>

      <div class="d-none name"><code>run_model.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Runs the OSEM model according to the given specification of modules.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">run_model</span><span class="op">(</span></span>
<span>  <span class="va">specification</span>,</span>
<span>  dictionary <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  inputdata_directory <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/data/raw"</span><span class="op">)</span>,</span>
<span>  primary_source <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"download"</span>, <span class="st">"local"</span><span class="op">)</span>,</span>
<span>  save_to_disk <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  use_logs <span class="op">=</span> <span class="st">"both"</span>,</span>
<span>  trend <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  ardl_or_ecm <span class="op">=</span> <span class="st">"ardl"</span>,</span>
<span>  max.ar <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  max.dl <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  saturation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"IIS"</span>, <span class="st">"SIS"</span><span class="op">)</span>,</span>
<span>  saturation.tpval <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>  max.block.size <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  gets_selection <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  selection.tpval <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>  constrain.to.minimum.sample <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  keep <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pretest_steps <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  present <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-specification">specification<a class="anchor" aria-label="anchor" href="#arg-specification"></a></dt>
<dd><p>A tibble or data.frame with three columns. Column names must be:
'type', 'dependent', and 'independent'. The column 'type' must contain for each row a
character of either 'd' (Identity) or 'n' (Definition - i.e. will be estimated).
The column 'dependent' must contain the LHS (Y variables) and the column named
'independent' containing the RHS (x variables separated by + and -).</p></dd>


<dt id="arg-dictionary">dictionary<a class="anchor" aria-label="anchor" href="#arg-dictionary"></a></dt>
<dd><p>A tibble or data.frame storing the Eurostat variable code
in column 'eurostat_code' and the model variable name in 'model_varname'.
If <code>download == TRUE</code> then the dictionary also requires a column named
'dataset_id' that stores the Eurostat dataset id. When <code>NULL</code>, the
<a href="dict.html">default dictionary</a> is used.</p></dd>


<dt id="arg-inputdata-directory">inputdata_directory<a class="anchor" aria-label="anchor" href="#arg-inputdata-directory"></a></dt>
<dd><p>A path to .rds input files in which the data is
stored. Can be <code>NULL</code> if <code>download == TRUE</code>.</p></dd>


<dt id="arg-primary-source">primary_source<a class="anchor" aria-label="anchor" href="#arg-primary-source"></a></dt>
<dd><p>A string. Determines whether <code>"download"</code> or
<code>"local"</code> data loading takes precedence.</p></dd>


<dt id="arg-save-to-disk">save_to_disk<a class="anchor" aria-label="anchor" href="#arg-save-to-disk"></a></dt>
<dd><p>A path to a directory where the final dataset will be
saved, including the file name and ending. Not saved when <code>NULL</code>.</p></dd>


<dt id="arg-use-logs">use_logs<a class="anchor" aria-label="anchor" href="#arg-use-logs"></a></dt>
<dd><p>To decide whether to log any variables. Must be one of
'both', 'y', 'x', or 'none'. Default is 'both'.</p></dd>


<dt id="arg-trend">trend<a class="anchor" aria-label="anchor" href="#arg-trend"></a></dt>
<dd><p>Logical. Should a trend be added? Default is TRUE.</p></dd>


<dt id="arg-ardl-or-ecm">ardl_or_ecm<a class="anchor" aria-label="anchor" href="#arg-ardl-or-ecm"></a></dt>
<dd><p>Either 'ardl' or 'ecm' to determine whether to estimate
the model as an Autoregressive Distributed Lag Function (ardl) or as an
Equilibrium Correction Model (ecm).</p></dd>


<dt id="arg-max-ar">max.ar<a class="anchor" aria-label="anchor" href="#arg-max-ar"></a></dt>
<dd><p>Integer. The maximum number of lags to use for the AR terms. as well as for the independent variables.</p></dd>


<dt id="arg-max-dl">max.dl<a class="anchor" aria-label="anchor" href="#arg-max-dl"></a></dt>
<dd><p>Integer. The maximum number of lags to use for the independent variables (the distributed lags).</p></dd>


<dt id="arg-saturation">saturation<a class="anchor" aria-label="anchor" href="#arg-saturation"></a></dt>
<dd><p>Carry out Indicator Saturation using the 'isat' function
in the 'gets' package. Needs a character vector or string. Default is
'c("IIS","SIS")' to carry out Impulse Indicator Saturation and Step Indicator
Saturation. Other possible values are 'NULL' to disable or 'TIS' or Trend
Indicator Saturation. When disabled, estimation will be carried out using
the 'arx' function from the 'gets' package.</p></dd>


<dt id="arg-saturation-tpval">saturation.tpval<a class="anchor" aria-label="anchor" href="#arg-saturation-tpval"></a></dt>
<dd><p>The target p-value of the saturation methods (e.g.
SIS and IIS, see the 'isat' function in the 'gets' package). Default is 0.01.</p></dd>


<dt id="arg-max-block-size">max.block.size<a class="anchor" aria-label="anchor" href="#arg-max-block-size"></a></dt>
<dd><p>Integer. Maximum size of block of variables to be
selected over, default = 20.</p></dd>


<dt id="arg-gets-selection">gets_selection<a class="anchor" aria-label="anchor" href="#arg-gets-selection"></a></dt>
<dd><p>Logical. Whether general-to-specific selection using
the 'getsm' function from the 'gets' package should be done on the final
saturation model. Default is TRUE.</p></dd>


<dt id="arg-selection-tpval">selection.tpval<a class="anchor" aria-label="anchor" href="#arg-selection-tpval"></a></dt>
<dd><p>Numeric. The target p-value of the model selection
methods (i.e. general-to-specific modelling, see the 'getsm' function
in the 'gets' package). Default is 0.01.</p></dd>


<dt id="arg-constrain-to-minimum-sample">constrain.to.minimum.sample<a class="anchor" aria-label="anchor" href="#arg-constrain-to-minimum-sample"></a></dt>
<dd><p>Logical. Should all data series be
constrained to the minimum data series? Default is <code>TRUE</code>.</p></dd>


<dt id="arg-keep">keep<a class="anchor" aria-label="anchor" href="#arg-keep"></a></dt>
<dd><p>Character. A string that will be used as regex (in <code><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl()</a></code>)
when selection is carried out. This argument therefore requires <code>gets_selection = TRUE</code>.
Variables that match this character will not be selected over (see <code><a href="https://rdrr.io/pkg/gets/man/getsm.html" class="external-link">getsm</a></code> for details).</p></dd>


<dt id="arg-pretest-steps">pretest_steps<a class="anchor" aria-label="anchor" href="#arg-pretest-steps"></a></dt>
<dd><p>Logical. Default is <code>FALSE</code>. This argument controls
whether isat should first be run for SIS in isolation before other saturation
methods are added (IIS, TIS). This can lead to better results if there are many
IIS identified at the end of the estimation sample/forecast origin. If <code>TRUE</code>
then <code><a href="https://rdrr.io/pkg/gets/man/isat.html" class="external-link">isat</a></code> is first carried out just for SIS (if activated using 'sis = TRUE'),
then the SIS breaks are pre-entered to another <code><a href="https://rdrr.io/pkg/gets/man/isat.html" class="external-link">isat</a></code> estimation but not selected over.
After both isat runs, a union model selection is done using  <code><a href="https://rdrr.io/pkg/gets/man/gets.html" class="external-link">gets</a></code>.</p></dd>


<dt id="arg-present">present<a class="anchor" aria-label="anchor" href="#arg-present"></a></dt>
<dd><p>A logical value whether the final OSEM model output
should be presented or not.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>Logical with default = FALSE. Should messages be displayed?
These messages are intended to give more information about the estimation
and data retrieval process.</p></dd>


<dt id="arg-plot">plot<a class="anchor" aria-label="anchor" href="#arg-plot"></a></dt>
<dd><p>Logical with default = TRUE. Should plots be displayed?</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class <a href="new_osem.html">osem</a>, which is a named list
with four elements:</p><dl><dt>args</dt>
<dd><p>A named list storing the user arguments for the OSEM
model.</p></dd>

<dt>module_order_eurostatvars</dt>
<dd><p>The original specification with translated
variable names to Eurostat codes and arranged in order of estimation.</p></dd>

<dt>module_collection</dt>
<dd><p>The above specification with two added columns
that store the model object for each module and the dataset used for
estimation, including fitted values for the dependent variable.</p></dd>

<dt>full_data</dt>
<dd><p>A tibble or data.frame containing the complete original
data for the OSEM model and the fitted values of each module.</p></dd>


</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">spec</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"d"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"d"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"n"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  dependent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"StatDiscrep"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"TOTS"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Import"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  independent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"TOTS - FinConsExpHH - FinConsExpGov - GCapitalForm - Export"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"GValueAdd + Import"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"FinConsExpHH + GCapitalForm"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="fu">run_model</span><span class="op">(</span>specification <span class="op">=</span> <span class="va">spec</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Dataset query already saved in cache_list.json...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Reading cache file /tmp/RtmpN90QV6/eurostat/b1a6002baab7fb27796d86df4c53dad9.rds</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Table  namq_10_a10  read from cache file:  /tmp/RtmpN90QV6/eurostat/b1a6002baab7fb27796d86df4c53dad9.rds</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Dataset query already saved in cache_list.json...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Reading cache file /tmp/RtmpN90QV6/eurostat/c6c39fa9ea0f07bf8f64918ffb8ff05f.rds</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Table  namq_10_gdp  read from cache file:  /tmp/RtmpN90QV6/eurostat/c6c39fa9ea0f07bf8f64918ffb8ff05f.rds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --- Estimation begins ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Estimating Import = FinConsExpHH + GCapitalForm </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Constructing TOTS = GValueAdd + Import </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Constructing StatDiscrep = TOTS - FinConsExpHH - FinConsExpGov - GCapitalForm - Export </span>
<span class="r-plt img"><img src="run_model-1.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> OSEM Model Output</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -----------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Estimation Options:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Sample: 1991-01-01 to 2022-01-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Max AR Considered: 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Estimation Option: ardl</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Relationships considered: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Model `Dep. Var.` `Ind. Var`                                                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>     1 StatDiscrep TOTS - FinConsExpHH - FinConsExpGov - GCapitalForm - Export</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>     2 TOTS        GValueAdd + Import                                         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>     3 Import      FinConsExpHH + GCapitalForm                                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Relationships estimated in the order:  3,2,1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Diagnostics:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  <span style="color: #949494;"># A tibble: 1 × 8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   `Dependent Variable` AR    ARCH  `Super Exogeneity`   IIS   SIS     n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Import               0.246 0.334 &lt;0.001***              5     0   122</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 1 more variable: `Share of Indicators` &lt;dbl&gt;</span></span>
<span class="r-plt img"><img src="run_model-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jonas Kurle, Moritz Schwarz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

